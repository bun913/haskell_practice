# Haskell の学習

The Unicorn Project を読んで純粋型関数言語に関心を持った。

関数型言語の考え方を理解しておくことで、これまでより短く・副作用の少ないコードをかけるようになる気がする・・

ということで Haskell の学習を開始してみました。

VSCode + DevContainerで環境を作成して、練習しました。

## ghciで動作確認

```haskell
-- min関数を利用
min 1 2
-- divで整数の除算
div 90 10
-- 関数をバッククオートで括ることで中置換数として呼び出すこともできる
90 `div` 10
```

中置換数とかすっごい数学的・・・（小並感）

```haskell
-- 関数定義
-- 関数名の後ろにスペースで区切った引数が続く
triple x = x + x + x
```

ハスケルファイルから関数を読み込み

```haskell
-- cd 1_first_step
-- ghciを起動
:l hello
triple 3
-- 9と出力される
```

「基本的で明らかに正しい関数を組み合わせてより大きな関数を組み立てる」

```haskell
-- haskellのifにはelseが必須
tripleSmallNumber x = if x > 100
                        then x
                        else x * 2
```

命令型では ifで何もしないということがあり得る。
Haskellは関数の集まり。

関数はデータ値を結果の値に変換するのに使われ、全ての関数は何らかの値を返す。

`ifは値を返す式であって文ではない`

その他にも

Haskellは関数を大文字で始められない

## リストについて

- Haskellのリストは一様なデータ型のものを格納できる
- 文字列は実際は文字のリストとして表される
    - 文字列にリスト関数を利用できる

```haskell
-- listの結合
let a = [1,2,3,4]
a ++ [5,6,7]
```

- 長い文字列を結合するときは注意
- Haslellではリストを最後まで走破する
- 先頭に追加するのは軽い操作になる

```haskell
-- :(cons演算子)で先頭に追加
"A":["B"]
5:[1,2,3]
-- ++演算子の場合は２つともリスト出ないといけない
-- [1,2,3]は 1:2:3 の糖衣構文という事実

-- リストの要素へアクセスは !!演算子を使う
"bun" !! 1
-- 要素は0から始まる

-- リストはリストを要素として持てるが同じ型のリストである必要がある
-- [1,[2,3]]はダメ
```

リスト操作

```haskell
head [5,4,3]
-- 5
tail [1,2,3]
-- [2,3] 先頭を除いた残りの要素を返す
last [1,2,3]
-- 3 最後の要素を返す
init [1,2,3,45]
-- 最後の要素を除いた残りのリストを返す
```

上記のいずれも空のリストは通らない。

```haskell
length [1,2,3]
-- 3 要素の長さを返す
null [1,2,3]
-- リストが空か調べる
reverse [1,2,3]
-- [3,2,1] リストを逆順に返す
take 2 [1,2,3]
-- [1,2] 先頭から指定された数のリストを返す
drop 2 [1,2,3]
-- [3] 先頭から指定された数の要素を削除したリストを返す
sum [1,2,3]
-- 6 リストの合計
product [1,2,3,4]
-- 24 リストの全ての積
4 `elem` [1,2,3,4]
-- True 要素がリストに含まれているか返す
```

内包表記も使える

```haskell
[x * 2 | x <- [1,2,3,4,5], x `mod` 2 == 0]
-- take関数で良い感じにもできる
[x *2 | x <- take 10 ([1..])]
```

## タプルについて

- タプルは複数の違う方の要素を格納して１つの値にするために使う
- サイズも固定

```haskell
(1,10)
```